{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-27T18:02:43.352Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 4,
    "implemented": 3,
    "items": [
      {
        "id": "REQ-17",
        "summary": "Fix the ChatSection component so that customers can see the full chat message history for their active support sessions. Ensure that when a customer selects a ticket or opens a chat session, all previously exchanged messages are fetched from the backend and displayed in chronological order in the chat UI. Debug and resolve any query filtering, principal mismatch, or data-fetching issues that prevent message history from rendering on the customer side.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/ChatSection.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/ChatSection.tsx"
        ]
      },
      {
        "id": "REQ-18",
        "summary": "Fix the ChatSection component so that customers can type and send reply messages in an active chat session. Ensure the message input field and send button are rendered and functional for customers (not just technicians). Debug and resolve any role-check, actor call, or state management issues that block customers from submitting new messages. After sending, the new message must appear immediately in the chat thread.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/ChatSection.tsx",
          "frontend/src/hooks/useQueries.ts"
        ],
        "matchedFiles": [
          "frontend/src/components/ChatSection.tsx",
          "frontend/src/hooks/useQueries.ts"
        ]
      },
      {
        "id": "REQ-19",
        "summary": "Remove all payment gate checks from the ticket creation flow in ClientPortal and TicketCreationForm. Customers must be able to open the ticket creation dialog and submit a new support ticket without any payment plan validation, Stripe/Razorpay checks, or subscription status checks blocking the action. The 'Create Ticket' button and dialog must be unconditionally accessible to any authenticated customer.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/ClientPortal.tsx",
          "frontend/src/components/TicketCreationForm.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/ClientPortal.tsx",
          "frontend/src/components/TicketCreationForm.tsx"
        ]
      },
      {
        "id": "REQ-20",
        "summary": "Audit the backend `main.mo` actor for any authorization checks on `getChatMessages`, `sendMessage`, or equivalent chat query/update functions that incorrectly restrict customer principals from reading or writing their own chat messages. Ensure that customers can call these functions for sessions linked to their own tickets, while preventing access to other customers' sessions. Fix any overly restrictive or missing principal-based access control that causes the chat history and reply issues.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/ChatSection.tsx",
    "frontend/src/components/ClientPortal.tsx",
    "frontend/src/components/TicketCreationForm.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useQueries.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}